# F5 gateway - using an ansible provisioner

## Todo

* [ ] use ansible firewalld module
* [ ] check state or reset state on f5fpc prior to connecting?

## Usage

```
$ vagrant up
```

## Use ansible-vault to encrypt confidential variables

Put these variables in the provisioning/hosts.yml file.

### F5 gateway address

```
$ ansible-vault encrypt_string --vault-id .vaultpass '192.168.100.100' --name 'F5_host'
F5_host: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39663564326136663037386334623566313764616337666332303137326338363564303262626430
          3938356438336239653630303834663131333363363530360a343036383165303430316465346539
          31373262343365333536356264623534613032356138633438383433323733396465396132313565
          3831373165653661660a323562303466656237616437313230393863313430393734373331306536
          6539
Encryption successful
```

### F5 user

```
$ ansible-vault encrypt_string --vault-id .vaultpass 'myuser' --name 'F5_user'
F5_user: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61323735656430383035386638343837323663633838303263363135373031366130343536333630
          6364626362663531313037343462363666383863626663660a373065656136636465373161396635
          31373764363861653336316139333863373039376434356235383264306131333464363466363363
          6432373965363337660a313134653665373833623834383361666264333766323537623834623565
          3735
Encryption successful
```

### F5 password

```
$ ansible-vault encrypt_string --vault-id .vaultpass 'secretpassword' --name 'F5_pass'
F5_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39383535333134373437313463303362663763333063303733623266353630313262663963666239
          3033373230366338363431373135646130363966326265340a346363393039323438316633363335
          66613333353131313636626163623136303331346636393637363731326261623064326532363838
          6562393131383432380a353934303534376364343461306566633063333732633166326431656262
          3930
Encryption successful
```

### ssh public key to add to gateway

```
$ ansible-vault encrypt_string --vault-id .vaultpass 'ssh-rsa AAAABbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb jeffs-lab' --name 'ssh_public_key'
ssh_public_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          38643938343765623239323362616666666664303963393136656533323138366435653930633831
          3738333838333161366339366533393265363761663436390a663364393730643736646131336631
          38376164323233303935663963383566653331653866333037616163626431613931663735653736
          3635323232643063360a366565666132383637363733376531363436346634656566343333663763
          35623236326438636637306335376361336662336663376337373634336232313333366135313530
          63346666623037373138343431623635303336306230353332336162343338613834616431356430
          66306661353061373634653264653833386339326330616339306362323465656435613365316565
          32626361373166303538623431616139366531376232323034316362613931666636393166396133
          32366561646634396636356632313165656530373537653461613530663936636635353134613934
          61336330333862346130313531393163626437646231373763336531363635356261653036306663
          64303433653933373039636261383865336432336138626464646631656639316461653636633339
          31336361366537313632656564353237633666653433393762616561313835393437633536663132
          33346332623531356635356134316434633638326436313963613064643238333534363139356362
          37386163343236323039313066616562626437376531616333353933626436633138326464313732
          33353236343135653638303033353230646134643437626364363738306239613831326532303762
          34346665386237346661363662326633383161323565396261616237343733646137333632643463
          36323439623538653630353137303139666536646132373366323133626439633566306539633262
          39666564396461646365653635346534313234306563353837363531333736653531366339346462
          65396433663033393139363931333165623937353838636538613135633864323564326134633863
          33373364663132383830333037363835313033623763393266616461383164356130616133333031
          30633332613262343334393839323731333666346330636339613864353835613864666131333461
          65626535623335346331636231643165633730613539303230626335376232343662383939323633
          35363333353064316337366230333337396364373066343631326434393163646637646438306362
          36303831666638653733
Encryption successful
```
